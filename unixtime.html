<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Unix Time Converter</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <style>
            :root {
                --gradient-start: #f6f8fa;
                --gradient-end: #e9ecef;
                --shadow-color: rgba(0, 0, 0, 0.1);
                --border-color: #ced4da;
            }

            body {
                background: linear-gradient(
                    135deg,
                    var(--gradient-start) 0%,
                    var(--gradient-end) 100%
                );
                min-height: 100vh;
                padding: 40px;
            }
            .container {
                max-width: 1200px;
                background: white;
                border-radius: 16px;
                padding: 40px;
                box-shadow: 0 10px 30px var(--shadow-color);
            }
            .timezone-input {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            .timezone-input input[type="number"] {
                width: 80px;
            }
            .timezone-select {
                position: relative;
            }
            .timezone-select input {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
                display: none;
            }
            .timezone-select.custom select {
                display: none;
            }
            .timezone-select.custom input {
                display: block;
                opacity: 1;
                position: static;
                border: 1px solid var(--border-color);
                border-radius: 0.375rem;
                padding: 0.375rem 0.75rem;
            }
            .time-output-group {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            .time-output-group input {
                flex: 1;
            }
            .format-label {
                color: #6c757d;
                font-size: 0.875em;
                white-space: nowrap;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1 class="display-4 text-center mb-5">Unix Time Converter</h1>

            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Unix Time to Local Time</h5>
                    <div class="input-group mb-3">
                        <input
                            type="number"
                            id="unixTimeInput"
                            class="form-control"
                            placeholder="Enter Unix Time"
                            oninput="convertUnixToLocal()"
                        />
                        <div class="timezone-select" id="timezoneSelectDiv">
                            <select
                                id="timezoneSelect"
                                class="form-select"
                                onchange="handleTimezoneChange(this); convertUnixToLocal();"
                            >
                                <option value="UTC+0">UTC (+0h)</option>
                                <option value="Asia/Tokyo">Tokyo (+9h)</option>
                                <option value="America/New_York">
                                    New York (-5h)
                                </option>
                                <option value="Europe/London">
                                    London (+0h)
                                </option>
                                <option value="Australia/Sydney">
                                    Sydney (+10h)
                                </option>
                                <option value="custom">
                                    Custom Timezone...
                                </option>
                            </select>
                            <input
                                type="number"
                                id="customTimezone"
                                min="-12"
                                max="14"
                                value="0"
                                step="0.5"
                                oninput="convertUnixToLocal()"
                                placeholder="UTC hours"
                            />
                        </div>
                        <select
                            id="formatSelect"
                            class="form-select"
                            onchange="convertUnixToLocal()"
                        >
                            <option value="JP">JP</option>
                            <option value="US">US</option>
                            <option value="EU">EU</option>
                            <option value="UK">UK</option>
                        </select>
                        <button
                            class="btn btn-success"
                            onclick="setCurrentUnixTime(); setCurrentLocalTime();"
                        >
                            Now
                        </button>
                    </div>
                    <div class="time-output-group">
                        <input
                            type="text"
                            id="localTimeOutput"
                            class="form-control mb-2"
                            readonly
                        />
                        <span id="formatDisplay" class="format-label"></span>
                    </div>
                    <small class="text-muted"
                        >Unix Time is in seconds since January 1, 1970 00:00:00
                        UTC</small
                    >
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Local Time to Unix Time</h5>
                    <div class="input-group mb-3">
                        <input
                            type="datetime-local"
                            id="localTimeInput"
                            class="form-control"
                            oninput="convertLocalToUnix()"
                        />
                        <div
                            class="timezone-select"
                            id="inputTimezoneSelectDiv"
                        >
                            <select
                                id="inputTimezoneSelect"
                                class="form-select"
                                onchange="handleTimezoneChange(this); convertLocalToUnix();"
                            >
                                <option value="UTC+0">UTC (+0h)</option>
                                <option value="Asia/Tokyo">Tokyo (+9h)</option>
                                <option value="America/New_York">
                                    New York (-5h)
                                </option>
                                <option value="Europe/London">
                                    London (+0h)
                                </option>
                                <option value="Australia/Sydney">
                                    Sydney (+10h)
                                </option>
                                <option value="custom">
                                    Custom Timezone...
                                </option>
                            </select>
                            <input
                                type="number"
                                id="customInputTimezone"
                                min="-12"
                                max="14"
                                value="0"
                                step="0.5"
                                oninput="convertLocalToUnix()"
                                placeholder="UTC hours"
                            />
                        </div>
                        <button
                            class="btn btn-success"
                            onclick="setCurrentLocalTime(); setCurrentUnixTime();"
                        >
                            Now
                        </button>
                    </div>
                    <input
                        type="text"
                        id="unixTimeOutput"
                        class="form-control"
                        readonly
                    />
                </div>
            </div>
        </div>

        <script>
            const CONFIG = {
                formatPatterns: {
                    JP: "YYYY年MM月DD日 HH:mm:ss",
                    US: "MM/DD/YYYY hh:mm:ss AA",
                    EU: "DD.MM.YYYY HH:mm:ss",
                    UK: "DD/MM/YYYY HH:mm:ss",
                },
                dateFormatOptions: {
                    basic: {
                        year: "numeric",
                        month: "2-digit",
                        day: "2-digit",
                        hour: "2-digit",
                        minute: "2-digit",
                        second: "2-digit",
                    },
                },
            };

            class TimeConverter {
                static handleTimezoneChange(select) {
                    const parent = select.closest(".timezone-select");
                    parent.classList.toggle(
                        "custom",
                        select.value === "custom",
                    );
                }

                static getTimezone(selectId, customInputId) {
                    const select = document.getElementById(selectId);
                    if (select.value === "custom") {
                        const offset =
                            document.getElementById(customInputId).value;
                        return `Etc/GMT${offset >= 0 ? "-" : "+"}${Math.abs(offset)}`;
                    }
                    return select.value;
                }

                static formatDate(date, format, timezone) {
                    const options = {
                        timeZone: timezone,
                        hour12: false,
                        ...CONFIG.dateFormatOptions.basic,
                    };

                    switch (format) {
                        case "JP":
                            options.month = "numeric";
                            options.hour = "numeric";
                            return date
                                .toLocaleString("ja-JP", options)
                                .replace(/\//g, "年")
                                .replace(" ", "日 ");
                        case "US":
                            options.hour12 = true;
                            return date.toLocaleString("en-US", options);
                        case "EU":
                            return date.toLocaleString("de-DE", options);
                        case "UK":
                            return date.toLocaleString("en-GB", options);
                        default:
                            return date
                                .toLocaleString("en-US", {
                                    ...options,
                                    hour12: false,
                                })
                                .replace(",", "");
                    }
                }
            }

            function setCurrentUnixTime() {
                const now = Math.floor(Date.now() / 1000);
                document.getElementById("unixTimeInput").value = now;
                convertUnixToLocal();
            }

            function setCurrentLocalTime() {
                const timezone = TimeConverter.getTimezone(
                    "inputTimezoneSelect",
                    "customInputTimezone",
                );
                const now = new Date();
                const localDateTime = now
                    .toLocaleString("sv-SE", { timeZone: timezone })
                    .slice(0, 16);
                document.getElementById("localTimeInput").value = localDateTime;
                convertLocalToUnix();
            }

            function convertUnixToLocal() {
                const unixTime = document.getElementById("unixTimeInput").value;
                if (!unixTime) return;

                const timezone = TimeConverter.getTimezone(
                    "timezoneSelect",
                    "customTimezone",
                );
                const format = document.getElementById("formatSelect").value;
                const date = new Date(unixTime * 1000);

                const localTimeOutput =
                    document.getElementById("localTimeOutput");
                const formatDisplay = document.getElementById("formatDisplay");

                localTimeOutput.value = TimeConverter.formatDate(
                    date,
                    format,
                    timezone,
                );
                formatDisplay.textContent = `(${CONFIG.formatPatterns[format]})`;
            }

            function convertLocalToUnix() {
                const localTime =
                    document.getElementById("localTimeInput").value;
                if (!localTime) return;

                const timezone = TimeConverter.getTimezone(
                    "inputTimezoneSelect",
                    "customInputTimezone",
                );
                const date = new Date(localTime);
                const unixTime = Math.floor(date.getTime() / 1000);
                document.getElementById("unixTimeOutput").value = unixTime;
            }

            window.onload = () => {
                setCurrentUnixTime();
                setCurrentLocalTime();
            };
        </script>
    </body>
</html>
